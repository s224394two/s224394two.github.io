---
title: "What is the cause of the increase in UFO sightings?"
from: markdown+emoji
format:
  html:
    code-fold: true
jupyter: python3
---

Since the beginning of the 20th century we have reported UFO sightings. What this project is trying to do is to look at the trend of the UFO sightings and try to explain them in a way which is not attributed to an increase in actual UFOs. Since a major part of the sightings are in the US (which already debunks the idea of UFOs actually being aliens) we are only focusing on that data.

### Time series plot
The first thing relevant to look at is the development of number of UFO sightings over the last decade. The first sighting in the data set is from 1910. But since they are so few sightings we choose to look at sightings from 1950 to 2014. Other than the number of sightings we also look at different popular shows and movies of different years to see if we might see their impact

```{python}

```

### Heatmap 
```{python}
#| error: false
#| warning: false
#| message: false
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
data = pd.read_csv("data/complete.csv", on_bad_lines='skip')
data['datetime'] = pd.to_datetime(data['datetime'], errors='coerce')
df=data[data["country"]=="us"].sort_index(level="datetime")
df = df.dropna(subset=['datetime'])
df = df.sort_values(by='datetime').reset_index(drop=True)
df=df.dropna()

from folium import plugins
from folium.plugins import HeatMap
import folium
from branca.element import Template, MacroElement

milbases=pd.read_csv("data/clean_military_bases.csv")
milcomp=milbases["component"]
letters=[i[0:2] for i in milbases["component"]]

milbases=milbases[(milcomp=="AF Guard" ) |(milcomp=="AF Reserve" )| (milcomp=="AF Active")]

milbasesl=milbases[["latitude","longitude"]]

# Create your map
map_hooray = folium.Map(location=[40.80887462217925, -101.64736435756755], zoom_start=4)

# Process your heatmap data
df['latitude'] = df['latitude'].astype(float)
df['longitude'] = df['longitude'].astype(float)
heat_df = df[['latitude', 'longitude']].dropna()
heat_data = [[row['latitude'], row['longitude']] for index, row in heat_df.iterrows()]

# Add heatmap with adjusted parameters for less density
HeatMap(
    heat_data,
    radius=5,             # smaller spread
    blur=1,               # smoother blending
    max_opacity=0.5,       # reduce color saturation
    min_opacity=0.3,       # allow fade for low-density areas
    use_local_extrema=False  # keep global scale
).add_to(map_hooray)

# Add circle markers for different components
for index, row in milbasesl[milcomp == "AF Reserve"].iterrows():
    folium.CircleMarker(
        location=[row['latitude'], row['longitude']],
        radius=3,
        color='magenta',
        fill=True,
        fill_color='magenta',
        fill_opacity=0.6
    ).add_to(map_hooray)

for index, row in milbasesl[milcomp == "AF Active"].iterrows():
    folium.CircleMarker(
        location=[row['latitude'], row['longitude']],
        radius=3,
        color='red',
        fill=True,
        fill_color='red',
        fill_opacity=0.6
    ).add_to(map_hooray)

for index, row in milbasesl[milcomp == "AF Guard"].iterrows():
    folium.CircleMarker(
        location=[row['latitude'], row['longitude']],
        radius=3,
        color='green',
        fill=True,
        fill_color='green',
        fill_opacity=0.6
    ).add_to(map_hooray)

# Custom legend (unchanged)
template = """
{% macro html(this, kwargs) %}
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Heatmap Legend</title>
  <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
  <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
  <script>
  $( function() {
    $( "#maplegend" ).draggable({
        start: function (event, ui) {
            $(this).css({ right: "auto", top: "auto", bottom: "auto" });
        }
    });
  });
  </script>
</head>
<body>
<div id='maplegend' class='maplegend' 
    style='position: absolute; z-index:9999; border:2px solid grey; background-color:rgba(255, 255, 255, 0.8);
     border-radius:6px; padding: 10px; font-size:14px; right: 20px; bottom: 20px;'>
     
<div class='legend-title'>Legend</div>
<div class='legend-scale'>
  <ul class='legend-labels'>
    <li><span style='background:red;opacity:0.7;'></span>AF Active</li>
    <li><span style='background:magenta;opacity:0.7;'></span>AF Reserve</li>
    <li><span style='background:green;opacity:0.7;'></span>AF Guard</li>
    <li><span style='background:#000000;opacity:0.7;'></span>Heatmap Intensity</li>
  </ul>
</div>
</div>
</body>
</html>

<style type='text/css'>
  .maplegend .legend-title {
    text-align: left;
    margin-bottom: 5px;
    font-weight: bold;
    font-size: 90%;
    }
  .maplegend .legend-scale ul {
    margin: 0;
    padding: 0;
    float: left;
    list-style: none;
    }
  .maplegend .legend-scale ul li {
    font-size: 80%;
    list-style: none;
    margin-left: 0;
    line-height: 18px;
    margin-bottom: 2px;
    }
  .maplegend ul.legend-labels li span {
    display: block;
    float: left;
    height: 16px;
    width: 30px;
    margin-right: 5px;
    margin-left: 0;
    border: 1px solid #999;
    }
  .maplegend .legend-source {
    font-size: 80%;
    color: #777;
    clear: both;
    }
  .maplegend a {
    color: #777;
    }
</style>
{% endmacro %}
"""

# Add the legend to the map
macro = MacroElement()
macro._template = Template(template)
map_hooray.get_root().add_child(macro)

# Display the map
map_hooray
```